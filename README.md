# app-screenshot
fromPySideimportQtCore,QtGuiclassAreaKanvas(QtGui.QWidget):def__init__(self, parent=None,gambar=None):super(AreaKanvas,self).__init__(parent)self.parent=parent self.rectTerakhir=Noneself.setAttribute(QtCore.Qt.WA_StaticContents)self.diKlik=False self.diPindah=Falseself.myPenWidth=1self.sudahDisimpan=Trueself.myPenColor= QtCore.Qt.blueself.image=QtGui.QImage()self.lastPoint=QtCore.QPoint()screen= QtGui.QDesktopWidget().screenGeometry()self.setFixedSize(screen.width(),screen.height()) self.showFullScreen()self.gambar=gambarself.masukanGambar(gambar) self.showFullScreen()defresizeEvent(self,event):ifself.width()>self.image.width()or self.height()>self.image.height():newWidth=max(self.width()+128,self.image.width()) newHeight=max(self.height()+128,self.image.height())self.resizeImage(self.image, QtCore.QSize(newWidth,newHeight))self.update()super(AreaKanvas,self).resizeEvent(event) defresizeImage(self,image,newSize):ifimage.size()==newSize:returnnewImage= QtGui.QImage(newSize,QtGui.QImage.Format_RGB32)newImage.fill(QtGui.qRgb(255,25,255)) painter=QtGui.QPainter(newImage)painter.drawImage(QtCore.QPoint(0,0),image)self.image =newImagedefmousePressEvent(self,event):ifevent.button()==QtCore.Qt.LeftButton: self.lastPoint=event.pos()self.diKlik=Trueself.awalX=event.pos().x()self.awalY= event.pos().y()defmouseMoveEvent(self,event):if(event.buttons()&amp;QtCore.Qt.LeftButton) andself.diKlik:self.diPindah=Trueself.masukanGambar(self.gambar) self.drawLineTo(event.pos())self.update()defmouseReleaseEvent(self,event):ifevent.button() ==QtCore.Qt.LeftButtonandself.diKlikandself.diPindah:self.diKlik=Falseself.diPindah= Falseself.akhirX=event.pos().x()self.akhirY=event.pos().y()self.kirimArea()self.close()def paintEvent(self,event):painter=QtGui.QPainter(self)painter.drawImage(QtCore.QPoint(0,0), self.image)defdrawLineTo(self,endPoint):painter=QtGui.QPainter(self.image) painter.setPen(QtGui.QPen(self.myPenColor,self.myPenWidth,QtCore.Qt.SolidLine, QtCore.Qt.RoundCap,QtCore.Qt.RoundJoin))ifself.rectTerakhir: painter.eraseRect(self.rectTerakhir)rectangle=QtCore.QRectF(self.awalX,self.awalY, endPoint.x()-self.awalX,endPoint.y()-self.awalY)poligon=QtGui.QPolygonF(rectangle) painter.drawPolyline(poligon)defkirimArea(self):ifself.awalX>self.akhirX:ifself.awalY> self.akhirY:self.parent.tangkapArea(self.akhirX+1,self.akhirY+1,self.awalX-self.akhirX-1, self.awalY-self.akhirY-1)else:self.parent.tangkapArea(self.akhirX+1,self.awalY+1,self.awalX￾self.akhirX-1,self.akhirY-self.awalY-1)else:ifself.awalY>self.akhirY: self.parent.tangkapArea(self.awalX+1,self.akhirY+1,self.akhirX-self.awalX-1,self.awalY￾self.akhirY-1)else:self.parent.tangkapArea(self.awalX+1,self.awalY+1,self.akhirX-self.awalX- 1,self.akhirY-self.awalY-1)defmasukanGambar(self,gambar):painter= QtGui.QPainter(self.image)painter.setPen(QtGui.QPen(self.myPenColor,self.myPenWidth, QtCore.Qt.SolidLine,QtCore.Qt.RoundCap,QtCore.Qt.RoundJoin))screen= QtGui.QDesktopWidget().screenGeometry()painter.drawPixmap(0,0,gambar)class Screenshot(QtGui.QWidget):def__init__(self):super(Screenshot,self).__init__()
